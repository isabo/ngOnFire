/**
 * ngOnFire
 * Copyright (c) 2016 Itzy Sabo
 * Licensed under the MIT License: https://github.com/isabo/ngOnFire/blob/master/LICENSE
 */
(function(){'use strict';angular.module("ngOnFire",[]);(function(){function f(f,g){function k(a,b){var c;this.$$model_=c=a instanceof onfire.model.Model?a:new a(b);c.onValueChanged(function(){f.$evalAsync(function(){})})}function e(a,b,c){this.$$model_=a=a instanceof onfire.model.Collection?a:new a(c);this.$$memberProxyCtor_=b;a.onChildAdded(n.bind(this));a.onChildRemoved(h.bind(this));this.$$isLoaded_=!1;var d=this;this.$$loadPromise_=a.whenLoaded().then(function(a){return a.forEach(function(a,b){d[b]=a instanceof onfire.model.Model?new d.$$memberProxyCtor_(a):
a})}).then(function(){d.$$isLoaded_=!0;r.call(d);return d})}function u(a){var b=this.$$model_;if(!this.$$isLoaded_)throw Error(onfire.model.Error.NOT_LOADED);if(!b.containsKey(a))throw Error(onfire.model.Error.NO_SUCH_KEY);return this[a]}function n(a){var b=this;return this.$$model_.fetch(a).then(function(c){b[a]=c instanceof onfire.model.Model?new b.$$memberProxyCtor_(c):c;r.call(b)})}function h(a,b){var c=this[a];c&&(delete this[a],(c instanceof k||c instanceof e)&&c.$dispose(),b||r.call(this))}
function r(){f.$evalAsync(function(){})}function v(a){var b=a.prototype instanceof onfire.model.Collection?x(a):y(a),c=a.getSchema(),d;for(d in a.prototype)a.prototype.hasOwnProperty(d)&&"function"===typeof a.prototype[d]&&(d in c?z(b,d):"Ctor_"!==d.slice(-5)&&(b.prototype["$"+d]=t(d)));return b}function y(a){function b(b){b instanceof onfire.Ref?k.call(this,a,b):k.call(this,b)}w(b,k);return b}function x(a){function b(b){b instanceof onfire.Ref?e.call(this,a,c,b):e.call(this,b,c)}var c=v(a.getMemberCtor());
w(b,e);return b}function z(a,b){Object.defineProperty(a.prototype,b,{get:function(){return this.$$model_[b].call(this.$$model_)},set:function(a){this.$$model_[b].call(this.$$model_,a)},enumerable:!0})}function t(a){return function(){var b=Array.prototype.slice.apply(arguments);b.unshift(this,a);return A.apply(null,b)}}function A(a,b,c){var d=a.$$model_,e=d[b].apply(d,Array.prototype.slice.call(arguments,2));return e&&"function"===typeof e.then?(e=e.then(function(b){return b===d?a:b}),g.when(e)):e===
d?a:e}k.prototype.$dispose=function(){this.$$model_.dispose();this.$$model_=null};var l="whenLoaded key exists hasChanges set save".split(" "),p;for(p in l){var m=l[p];k.prototype["$"+m]=t(m)}e.prototype.$get=u;e.prototype.$create=function(a){var b=this;return this.$$model_.create(a).then(function(a){var d=a.key();return d in b?(a.dispose(),u.call(b,d)):(new b.$$memberProxyCtor_(a)).$whenLoaded()})};e.prototype.$forEach=function(a){var b=[];this.$$model_.keys().map(function(c){(c=a.call(null,self[c],
c))&&"function"===typeof c.then&&b.push(g.when(c))});return g.all(b)};e.prototype.$whenLoaded=function(){return g.when(this.$$loadPromise_)};e.prototype.$dispose=function(){for(var a=this.$$model_,b=a.keys(),c=0;c<b.length;c++)h.call(this,b[c],!0);a.dispose();this.$$model_=null};l="key exists hasChanges save set remove count containsKey keys count".split(" ");for(p in l)m=l[p],e.prototype["$"+m]=t(m);return function(a){return v(a)}}angular.module("ngOnFire").factory("$Model",f);f.$inject=["$rootScope",
"$q"]})();function w(f,q){function g(){}g.prototype=q.prototype;f.b=q.prototype;f.prototype=new g;f.prototype.constructor=f;f.a=function(f,e,g){for(var n=Array(arguments.length-2),h=2;h<arguments.length;h++)n[h-2]=arguments[h];return q.prototype[e].apply(f,n)}};})();//# sourceMappingURL=./ng-onfire.min.js.map

